<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/7b0d10d140b8a0a5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7b0d10d140b8a0a5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-f11614d8aa7ee555.js" defer=""></script><script src="/_next/static/chunks/pages/_app-694ee0f2821639fc.js" defer=""></script><script src="/_next/static/chunks/996-eeb5175dbd5dba8f.js" defer=""></script><script src="/_next/static/chunks/36-94b5e24e03efc6db.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-af748dcc13a25fcb.js" defer=""></script><script src="/_next/static/yP12RsHv5AtYmalih9fUM/_buildManifest.js" defer=""></script><script src="/_next/static/yP12RsHv5AtYmalih9fUM/_ssgManifest.js" defer=""></script></head><body><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Making HTML tables in D3 doesn't need to be a pain","link":"https://vis4.net/blog/2015/04/making-html-tables-in-d3-doesnt-need-to-be-a-pain/","pubDate":"2015-04-24T16:48:27.000Z","content":"\u003cp\u003e\u003cstrong\u003etl;dr:\u003c/strong\u003e Here’s a \u003ca href=\"https://jsfiddle.net/vis4/Lby2eq1j/\" target=\"_blank\" rel=\"noopener\"\u003edemo with source code\u003c/a\u003e. D3 is nice, but it also makes some simple things look really complicated. One of them is making a simple HTML table. Let’s say you got a simple dataset, stored as array of objects just as you would get from d3.csv:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e movies = [\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"string\"\u003e\"The Godfather\"\u003c/span\u003e, \u003cspan class=\"attr\"\u003eyear\u003c/span\u003e: \u003cspan class=\"number\"\u003e1972\u003c/span\u003e, \u003cspan class=\"attr\"\u003elength\u003c/span\u003e: \u003cspan class=\"number\"\u003e175\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      budget: \u003cspan class=\"number\"\u003e6000000\u003c/span\u003e, \u003cspan class=\"attr\"\u003erating\u003c/span\u003e: \u003cspan class=\"number\"\u003e9.1\u003c/span\u003e \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"string\"\u003e\"The Shawshank Redemption\"\u003c/span\u003e, \u003cspan class=\"attr\"\u003eyear\u003c/span\u003e: \u003cspan class=\"number\"\u003e1994\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      length: \u003cspan class=\"number\"\u003e142\u003c/span\u003e, \u003cspan class=\"attr\"\u003ebudget\u003c/span\u003e: \u003cspan class=\"number\"\u003e25000000\u003c/span\u003e, \u003cspan class=\"attr\"\u003erating\u003c/span\u003e: \u003cspan class=\"number\"\u003e9.1\u003c/span\u003e \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"string\"\u003e\"The Lord of the Rings 3\"\u003c/span\u003e, \u003cspan class=\"attr\"\u003eyear\u003c/span\u003e: \u003cspan class=\"number\"\u003e2003\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      length: \u003cspan class=\"number\"\u003e251\u003c/span\u003e, \u003cspan class=\"attr\"\u003ebudget\u003c/span\u003e: \u003cspan class=\"number\"\u003e94000000\u003c/span\u003e, \u003cspan class=\"attr\"\u003erating\u003c/span\u003e: \u003cspan class=\"number\"\u003e9\u003c/span\u003e \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u003cspan class=\"comment\"\u003e/* ... */\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e];\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eTo render this in a table you would typically start writing some code like this:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e table = d3.select(\u003cspan class=\"string\"\u003e'body'\u003c/span\u003e).append(\u003cspan class=\"string\"\u003e'table'\u003c/span\u003e);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e tr = table.selectAll(\u003cspan class=\"string\"\u003e'tr'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .data(movies).enter()\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .append(\u003cspan class=\"string\"\u003e'tr'\u003c/span\u003e);\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eNow you got a selection of table row elements, each of which is bound to one movie. But how do you make the table columns? What I did a lot was this:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e).html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.title; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e).html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.year; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e).html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.budget; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eThat looks easy at first, but of course you want more stuff, like a class name depending on the column etc. So the above code turns into this:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .attr(\u003cspan class=\"string\"\u003e'class'\u003c/span\u003e, \u003cspan class=\"string\"\u003e'title'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.title; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .attr(\u003cspan class=\"string\"\u003e'class'\u003c/span\u003e, \u003cspan class=\"string\"\u003e'center'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.year; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003etr.append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .attr(\u003cspan class=\"string\"\u003e'class'\u003c/span\u003e, \u003cspan class=\"string\"\u003e'num'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    .html(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003em\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e m.budget; \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eAlso you might need a table header, so essentially you copy this entire block to create the \u003cstrong\u003eth\u003c/strong\u003e elements. Better make sure you keep them in the same order if you decide to change your code later. To make it short, this is an entire mess. It’s not the right way to do a table.\u003c/p\u003e\u003ch2 id=\"html-tables-in-d3-the-right-way\"\u003e\u003ca class=\"anchor\" href=\"#html-tables-in-d3-the-right-way\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e HTML tables in D3, the right way\u003c/h2\u003e\u003cp\u003eTo make tables fun again, we simply define a set of columns as an array of objects. Note that some of the attributes of the column objects are functions, these will later be evaluated against the row objects to get the values for each cell.\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e columns = [\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Movie title'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'title'\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      html: \u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e r.title; \u0026#125; \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Year'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'center'\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      html: \u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e r.year; \u0026#125; \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Length'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'center'\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      html: \u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e r.length; \u0026#125; \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Budget'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'num'\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      html: \u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e r.budget; \u0026#125; \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Rating'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'num'\u003c/span\u003e,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e      html: \u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow\u003c/span\u003e) \u003c/span\u003e\u0026#123; \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e r.rating; \u0026#125; \u0026#125;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e];\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eActually, since I really don’t like all these verbose getter functions here, let’s instead use the nice \u003cstrong\u003eƒ\u003c/strong\u003e helper function from the \u003ca href=\"https://github.com/gka/d3-jetpack\" target=\"_blank\" rel=\"noopener\"\u003ed3-jetpack\u003c/a\u003e and compress the code a bit:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"keyword\"\u003evar\u003c/span\u003e columns = [\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Movie title'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'title'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ehtml\u003c/span\u003e: ƒ(\u003cspan class=\"string\"\u003e'title'\u003c/span\u003e) \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Year'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'center'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ehtml\u003c/span\u003e: ƒ(\u003cspan class=\"string\"\u003e'year'\u003c/span\u003e) \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Length'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'center'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ehtml\u003c/span\u003e: ƒ(\u003cspan class=\"string\"\u003e'length'\u003c/span\u003e) \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Budget'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'num'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ehtml\u003c/span\u003e: ƒ(\u003cspan class=\"string\"\u003e'budget'\u003c/span\u003e) \u0026#125;,\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e    \u0026#123; \u003cspan class=\"attr\"\u003ehead\u003c/span\u003e: \u003cspan class=\"string\"\u003e'Rating'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ecl\u003c/span\u003e: \u003cspan class=\"string\"\u003e'num'\u003c/span\u003e, \u003cspan class=\"attr\"\u003ehtml\u003c/span\u003e: ƒ(\u003cspan class=\"string\"\u003e'rating'\u003c/span\u003e) \u0026#125;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e];\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eWe can now use these column objects in a data join to create the table header. Much more fun than duplicating all the code for each column.\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003etable.append(\u003cspan class=\"string\"\u003e'thead'\u003c/span\u003e).append(\u003cspan class=\"string\"\u003e'tr'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .selectAll(\u003cspan class=\"string\"\u003e'th'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .data(columns).enter()\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .append(\u003cspan class=\"string\"\u003e'th'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .attr(\u003cspan class=\"string\"\u003e'class'\u003c/span\u003e, ƒ(\u003cspan class=\"string\"\u003e'cl'\u003c/span\u003e))\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .text(ƒ(\u003cspan class=\"string\"\u003e'head'\u003c/span\u003e));\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eFinally, we can do the same with the table body. But if we would just pass the column objects here, we would lose the information of the row. So that’s why we evaluate all the function properties of the column objects against the row objects. This way we convert the list of column objects into a list of cell objects to use in the second data join:\u003c/p\u003e\u003cfigure class=\"highlight js\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e6\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e7\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e8\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e9\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e10\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e11\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e12\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e13\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e14\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e15\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e16\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e17\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e18\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003etable.append(\u003cspan class=\"string\"\u003e'tbody'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .selectAll(\u003cspan class=\"string\"\u003e'tr'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .data(movies).enter()\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .append(\u003cspan class=\"string\"\u003e'tr'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .selectAll(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .data(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003erow, i\u003c/span\u003e) \u003c/span\u003e\u0026#123;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e       \u003cspan class=\"comment\"\u003e// evaluate column objects against the current row\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e       \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e columns.map(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003ec\u003c/span\u003e) \u003c/span\u003e\u0026#123;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e           \u003cspan class=\"keyword\"\u003evar\u003c/span\u003e cell = \u0026#123;\u0026#125;;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e           d3.keys(c).forEach(\u003cspan class=\"function\"\u003e\u003cspan class=\"keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"params\"\u003ek\u003c/span\u003e) \u003c/span\u003e\u0026#123;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e               cell[k] = \u003cspan class=\"keyword\"\u003etypeof\u003c/span\u003e c[k] == \u003cspan class=\"string\"\u003e'function'\u003c/span\u003e ? c[k](row,i) : c[k];\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e           \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e           \u003cspan class=\"keyword\"\u003ereturn\u003c/span\u003e cell;\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e       \u0026#125;);\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   \u0026#125;).enter()\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .append(\u003cspan class=\"string\"\u003e'td'\u003c/span\u003e)\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .html(ƒ(\u003cspan class=\"string\"\u003e'html'\u003c/span\u003e))\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e   .attr(\u003cspan class=\"string\"\u003e'class'\u003c/span\u003e, ƒ(\u003cspan class=\"string\"\u003e'cl'\u003c/span\u003e));\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eAnd that’s it. Again, here’s a link to the \u003ca href=\"http://bl.ocks.org/gka/17ee676dc59aa752b4e6\" target=\"_blank\" rel=\"noopener\"\u003edemo with full source code\u003c/a\u003e.\u003c/p\u003e\u003ch1 id=\"comments\"\u003e\u003ca class=\"anchor\" href=\"#comments\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e Comments\u003c/h1\u003e\u003cp\u003eDheepan (Jul 21, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eHi Gregor,\u003c/p\u003e\u003cp\u003eHow do I access the values inside the rows to use in functions? In my case I want to use the values in my class td.num to determine the background fill based on variable sentcolor.\u003c/p\u003e\u003cp\u003eMy return function for .style selected on (“td.num”)  can only access the index number but not the actual value.\u003c/p\u003e\u003cp\u003eSee example here, \u003ca href=\"http://jsfiddle.net/dheepanr/p6uovdL7/2/\" rel=\"noopener\" target=\"_blank\"\u003elink\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eNagarajan Chinnasamy (Apr 29, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eIn case if you need an SVG based Grid (Table with adjustable columns, sorting etc.), you can look at:  \u003ca href=\"https://github.com/PMSI-AlignAlytics/scrollgrid\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/PMSI-AlignAlytics/scrollgrid\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThis is based on D3.\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003ekeith (May 10, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eincluding datatables.js is very simple to add to your example and makes for nice user enabled sorting/filtering.\u003c/p\u003e\u003cp\u003ei was working on a project where the data drawn by d3 was to be controlled by datatables but never did implement that part of it. i think that would be pretty slick.\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eWill Morris (Apr 24, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eThis is a nice solution. However, for an HTML table, why not use something like handlebars.js? Just curious about your experience with one vs the other.\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003eGregor Aisch (Apr 24, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eIn the context where I am using this code, D3 is part of the default project setup, but handlebars isn’t. We do a lot of graphics so it kind of makes sense to stay in one framework…\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003ePat (Jul 20, 2015)\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eThe array-of-columns is a very cool approach.\u003c/p\u003e\u003cp\u003eIt seems like the column definitions would be a good place to put a sorting function, which would enable a simple version of the kinds of sorting the other commenters are suggesting.\u003c/p\u003e\u003c/blockquote\u003e","contentSnippet":"tl;dr: Here’s a demo with source code. D3 is nice, but it also makes some simple things look really complicated. One of them is making a simple HTML table. Let’s say you got a simple dataset, stored as array of objects just as you would get from d3.csv:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\nvar movies = [\n    { title: \"The Godfather\", year: 1972, length: 175,\n      budget: 6000000, rating: 9.1 },\n    { title: \"The Shawshank Redemption\", year: 1994,\n      length: 142, budget: 25000000, rating: 9.1 },\n    { title: \"The Lord of the Rings 3\", year: 2003,\n      length: 251, budget: 94000000, rating: 9 },\n    /* ... */\n];\n\n\nTo render this in a table you would typically start writing some code like this:\n\n\n1\n2\n3\n4\n5\n\nvar table = d3.select('body').append('table');\n\nvar tr = table.selectAll('tr')\n    .data(movies).enter()\n    .append('tr');\n\n\nNow you got a selection of table row elements, each of which is bound to one movie. But how do you make the table columns? What I did a lot was this:\n\n\n1\n2\n3\n\ntr.append('td').html(function(m) { return m.title; });\ntr.append('td').html(function(m) { return m.year; });\ntr.append('td').html(function(m) { return m.budget; });\n\n\nThat looks easy at first, but of course you want more stuff, like a class name depending on the column etc. So the above code turns into this:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\ntr.append('td')\n    .attr('class', 'title')\n    .html(function(m) { return m.title; });\n\ntr.append('td')\n    .attr('class', 'center')\n    .html(function(m) { return m.year; });\n\ntr.append('td')\n    .attr('class', 'num')\n    .html(function(m) { return m.budget; });\n\n\nAlso you might need a table header, so essentially you copy this entire block to create the th elements. Better make sure you keep them in the same order if you decide to change your code later. To make it short, this is an entire mess. It’s not the right way to do a table.\n# HTML tables in D3, the right way\nTo make tables fun again, we simply define a set of columns as an array of objects. Note that some of the attributes of the column objects are functions, these will later be evaluated against the row objects to get the values for each cell.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\nvar columns = [\n    { head: 'Movie title', cl: 'title',\n      html: function(row) { return r.title; } },\n    { head: 'Year', cl: 'center',\n      html: function(row) { return r.year; } },\n    { head: 'Length', cl: 'center',\n      html: function(row) { return r.length; } },\n    { head: 'Budget', cl: 'num',\n      html: function(row) { return r.budget; } },\n    { head: 'Rating', cl: 'num',\n      html: function(row) { return r.rating; } }\n];\n\n\nActually, since I really don’t like all these verbose getter functions here, let’s instead use the nice ƒ helper function from the d3-jetpack and compress the code a bit:\n\n\n1\n2\n3\n4\n5\n6\n7\n\nvar columns = [\n    { head: 'Movie title', cl: 'title', html: ƒ('title') },\n    { head: 'Year', cl: 'center', html: ƒ('year') },\n    { head: 'Length', cl: 'center', html: ƒ('length') },\n    { head: 'Budget', cl: 'num', html: ƒ('budget') },\n    { head: 'Rating', cl: 'num', html: ƒ('rating') }\n];\n\n\nWe can now use these column objects in a data join to create the table header. Much more fun than duplicating all the code for each column.\n\n\n1\n2\n3\n4\n5\n6\n\ntable.append('thead').append('tr')\n   .selectAll('th')\n   .data(columns).enter()\n   .append('th')\n   .attr('class', ƒ('cl'))\n   .text(ƒ('head'));\n\n\nFinally, we can do the same with the table body. But if we would just pass the column objects here, we would lose the information of the row. So that’s why we evaluate all the function properties of the column objects against the row objects. This way we convert the list of column objects into a list of cell objects to use in the second data join:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\ntable.append('tbody')\n   .selectAll('tr')\n   .data(movies).enter()\n   .append('tr')\n   .selectAll('td')\n   .data(function(row, i) {\n       // evaluate column objects against the current row\n       return columns.map(function(c) {\n           var cell = {};\n           d3.keys(c).forEach(function(k) {\n               cell[k] = typeof c[k] == 'function' ? c[k](row,i) : c[k];\n           });\n           return cell;\n       });\n   }).enter()\n   .append('td')\n   .html(ƒ('html'))\n   .attr('class', ƒ('cl'));\n\n\nAnd that’s it. Again, here’s a link to the demo with full source code.\n# Comments\nDheepan (Jul 21, 2015)\n\nHi Gregor,\nHow do I access the values inside the rows to use in functions? In my case I want to use the values in my class td.num to determine the background fill based on variable sentcolor.\nMy return function for .style selected on (“td.num”)  can only access the index number but not the actual value.\nSee example here, link\n\nNagarajan Chinnasamy (Apr 29, 2015)\n\nIn case if you need an SVG based Grid (Table with adjustable columns, sorting etc.), you can look at:  https://github.com/PMSI-AlignAlytics/scrollgrid\nThis is based on D3.\n\nkeith (May 10, 2015)\n\nincluding datatables.js is very simple to add to your example and makes for nice user enabled sorting/filtering.\ni was working on a project where the data drawn by d3 was to be controlled by datatables but never did implement that part of it. i think that would be pretty slick.\n\nWill Morris (Apr 24, 2015)\n\nThis is a nice solution. However, for an HTML table, why not use something like handlebars.js? Just curious about your experience with one vs the other.\n\nGregor Aisch (Apr 24, 2015)\n\nIn the context where I am using this code, D3 is part of the default project setup, but handlebars isn’t. We do a lot of graphics so it kind of makes sense to stay in one framework…\n\nPat (Jul 20, 2015)\n\nThe array-of-columns is a very cool approach.\nIt seems like the column definitions would be a good place to put a sorting function, which would enable a simple version of the kinds of sorting the other commenters are suggesting.","summary":"\u003cp\u003e\u003cstrong\u003etl;dr:\u003c/strong\u003e Here’s a \u003ca href=\"https://jsfiddle.net/vis4/Lby2eq1j/\" target=\"_blank\" rel=\"noopener\"\u003edemo with source code\u003c/a\u003e. ","id":"https://vis4.net/blog/2015/04/making-html-tables-in-d3-doesnt-need-to-be-a-pain/","isoDate":"2015-04-24T16:48:27.000Z","blogTitle":"vis4.net"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["making-html-tables-in-d3-doesnt-need-to-be-a-pain"]},"buildId":"yP12RsHv5AtYmalih9fUM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>