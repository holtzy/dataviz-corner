<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/203069c7c894df4d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/203069c7c894df4d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-f11614d8aa7ee555.js" defer=""></script><script src="/_next/static/chunks/pages/_app-694ee0f2821639fc.js" defer=""></script><script src="/_next/static/chunks/996-eeb5175dbd5dba8f.js" defer=""></script><script src="/_next/static/chunks/36-94b5e24e03efc6db.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...slug%5D-af748dcc13a25fcb.js" defer=""></script><script src="/_next/static/g_JtxhWbqiyn-x4UYiLa0/_buildManifest.js" defer=""></script><script src="/_next/static/g_JtxhWbqiyn-x4UYiLa0/_ssgManifest.js" defer=""></script></head><body><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Say hello to Schnack.js: A new Disqus-like commenting drop-in for static websites","link":"https://vis4.net/blog/2017/10/hello-schnack/","pubDate":"2017-10-08T20:54:30.000Z","content":"\u003cp\u003e\u003cstrong\u003etl;dr:\u003c/strong\u003e \u003ca href=\"https://github.com/gka/schnack\" target=\"_blank\" rel=\"noopener\"\u003eSchnack.js\u003c/a\u003e is an awesome, ad-free, open source Disqus clone that comes with a very minimal, hackable code base.\u003c/p\u003e\u003ch2 id=\"how-to-embed-schnackjs\"\u003e\u003ca class=\"anchor\" href=\"#how-to-embed-schnackjs\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e How to embed Schnack.js\u003c/h2\u003e\u003cp\u003eIt works pretty much like other drop-in commenting systems. You drop a script tag under your blog posts, pass a few parameters and Schnack is doing the rest for you.\u003c/p\u003e\u003cfigure class=\"highlight html\"\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd class=\"gutter\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e1\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e2\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e3\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e4\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e5\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003ctd class=\"code\"\u003e\u003cpre\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003ediv\u003c/span\u003e \u003cspan class=\"attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"string\"\u003e\"comments-go-here\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e\u0026lt;\u003cspan class=\"name\"\u003escript\u003c/span\u003e \u003cspan class=\"attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"string\"\u003e\"text/javascript\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e   \u003cspan class=\"attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"string\"\u003e\"https://schnack.youdomain.com/embed.js\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e   \u003cspan class=\"attr\"\u003edata-schnack-target\u003c/span\u003e=\u003cspan class=\"string\"\u003e\".comments-go-here\"\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"tag\"\u003e   \u003cspan class=\"attr\"\u003edata-schnack-slug\u003c/span\u003e=\u003cspan class=\"string\"\u003e\"my-blogpost-slug\"\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"undefined\"\u003e\u003c/span\u003e\u003cspan class=\"tag\"\u003e\u0026lt;/\u003cspan class=\"name\"\u003escript\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003cbr\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/figure\u003e\u003cp\u003eThanks to the \u003ca href=\"#standing-on-the-shoulders-of-giants\"\u003ewonders\u003c/a\u003e of modern science the \u003ccode\u003eembed.js\u003c/code\u003e comes at 2KB gzipped and minified. Your site has full control of the styling of the comments.\u003c/p\u003e\u003ch2 id=\"how-schnack-is-protecting-against-spam\"\u003e\u003ca class=\"anchor\" href=\"#how-schnack-is-protecting-against-spam\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e How Schnack is protecting against spam\u003c/h2\u003e\u003cp\u003eSchnack asks comment authors to sign in via Twitter or Github\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn1\" id=\"fnref1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e. New comments need to be approved by the site owner before they show up. To save you some work you can also “trust” comment authors, in which case their comments are being approved automatically.\u003c/p\u003e\u003ch2 id=\"how-to-install-schnack-on-your-server\"\u003e\u003ca class=\"anchor\" href=\"#how-to-install-schnack-on-your-server\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e How to install Schnack on your server\u003c/h2\u003e\u003cp\u003eSchnack is a Node app and uses a SQLite database to store the comments. So all you really need to do is to clone the repo, run \u003ccode\u003enpm install\u003c/code\u003e and start the app.\u003c/p\u003e\u003cp\u003eTo hook up the authentication you need to go to \u003ca href=\"http://apps.twitter.com\" target=\"_blank\" rel=\"noopener\"\u003eapps.twitter.com\u003c/a\u003e, create a new app and copy the api keys over to your \u003ca href=\"https://github.com/gka/schnack/blob/master/config.tpl.json\" target=\"_blank\" rel=\"noopener\"\u003econfig file\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eSchnack needs to run on a subdomain of the domain your blog is running on, mainly because that’s what cookie authentication is limited to\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn2\" id=\"fnref2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\u003ch2 id=\"why-did-we-decide-to-work-on-schnack\"\u003e\u003ca class=\"anchor\" href=\"#why-did-we-decide-to-work-on-schnack\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e Why did  we decide to work on Schnack?\u003c/h2\u003e\u003cp\u003eOk, here’s a little backstory:\u003c/p\u003e\u003cp\u003e\u003ca href=\"/blog/2017/10/goodbye-wordpress/\"\u003eLast week\u003c/a\u003e I replaced my old Wordpress blog with a static \u003ca href=\"https://hexo.io\" target=\"_blank\" rel=\"noopener\"\u003eHexo\u003c/a\u003e website. Hexo gave me everything I wanted, except for one thing: I missed the comment box below my posts.\u003c/p\u003e\u003cp\u003eSo I scouted out my options. \u003ca href=\"https://disqus.com/\" target=\"_blank\" rel=\"noopener\"\u003eDisqus\u003c/a\u003e was my first consideration, but I was put off by the ads that come with the free “Basic” plan, aside from \u003ca href=\"https://blog.disqus.com/security-alert-user-info-breach?utm_source=motd_marketing\u0026amp;utm_medium=web\" target=\"_blank\" rel=\"noopener\"\u003eprivacy considerations\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThen I thought there must be an app for this, but when I didn’t find one that fit my needs (see next section) I decided it’s time to do some hacking\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#fn3\" id=\"fnref3\"\u003e[3]\u003c/a\u003e\u003c/sup\u003e!\u003c/p\u003e\u003cp\u003eThe next step was to put up a readme on Github, just to keep notes of what this app might look like and how it should be organized. My curious friends over at \u003ca href=\"https://webkid.io\" target=\"_blank\" rel=\"noopener\"\u003eWebkid\u003c/a\u003e found the readme while Github-lurking on my repositories and that’s how we got started!\u003c/p\u003e\u003ch2 id=\"prior-art\"\u003e\u003ca class=\"anchor\" href=\"#prior-art\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e Prior art\u003c/h2\u003e\u003cp\u003eOf course, Schnack is not the first of its kind. There are several open source alternatives that I could’ve used but I decided not to.\u003c/p\u003e\u003cp\u003eThe new flag ship amonst open source commenting systems comes from a well-funded Mozilla-project named \u003ca href=\"https://coralproject.net/\" target=\"_blank\" rel=\"noopener\"\u003eCoral Project\u003c/a\u003e in collaboration with the Washington Post and New York Times. They have recently launched their comment software \u003ca href=\"https://coralproject.net/products/talk.html\" target=\"_blank\" rel=\"noopener\"\u003eTalk\u003c/a\u003e which is now \u003ca href=\"https://www.washingtonpost.com/pr/wp/2017/09/06/the-washington-post-launches-talk-commenting-platform/\" target=\"_blank\" rel=\"noopener\"\u003ein use on washingtonpost.com\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eBut after looking into Talk’s \u003ca href=\"https://github.com/coralproject/talk\" target=\"_blank\" rel=\"noopener\"\u003ecode base\u003c/a\u003e I felt it was just way too complex for what I needed.\u003c/p\u003e\u003cp\u003eThere also a few other open source commenting tools:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://github.com/discourse/discourse\" target=\"_blank\" rel=\"noopener\"\u003eDiscourse\u003c/a\u003e - looks pretty complex as well, and is written in Ruby on Rails which I refuse to even look at\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/adtac/commento\" target=\"_blank\" rel=\"noopener\"\u003eCommento\u003c/a\u003e - looks clean and simple, but it’s written in Go, which is too fancy for me\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://posativ.org/isso/\" target=\"_blank\" rel=\"noopener\"\u003eIsso\u003c/a\u003e - I only saw this halfway through the coding. Looks actually very similar to Schnack, except it’s written in Python and doesn’t have third-party site authentication (but allows anonymous commenting).\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eBut I wanted something for Node and haven’t found it so far. Let me know in the comments below if I missed another project!\u003c/p\u003e\u003ch2 id=\"whats-up-with-that-weird-name\"\u003e\u003ca class=\"anchor\" href=\"#whats-up-with-that-weird-name\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e What’s up with that weird name?\u003c/h2\u003e\u003cp\u003eFor non-Germans out there: It’s called \u003cem\u003eSchnack\u003c/em\u003e, not \u003cem\u003esnack\u003c/em\u003e, and it has nothing to do with \u003ca href=\"http://www.urbandictionary.com/define.php?term=schnack\" target=\"_blank\" rel=\"noopener\"\u003ereceiving sexual favors\u003c/a\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://dict.leo.org/englisch-deutsch/schnack\" target=\"_blank\" rel=\"noopener\"\u003eSchnack\u003c/a\u003e is simply a nice northern-German word for chatter that wasn’t already taken by other projects.\u003c/p\u003e\u003ch2 id=\"can-i-try-schnack-now\"\u003e\u003ca class=\"anchor\" href=\"#can-i-try-schnack-now\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e Can I try Schnack now?\u003c/h2\u003e\u003cp\u003eYes, just leave a comment under this blog post!\u003c/p\u003e\u003ch2 id=\"standing-on-the-shoulders-of-giants\"\u003e\u003ca class=\"anchor\" href=\"#standing-on-the-shoulders-of-giants\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e Standing on the shoulders of giants\u003c/h2\u003e\u003cp\u003eIt wouldn’t be possible to write an app like this in a few days without the amazing libraries it was built upon:\u003c/p\u003e\u003cul\u003e\u003cli\u003eThanks to \u003ca href=\"https://github.com/Rich-Harris\" target=\"_blank\" rel=\"noopener\"\u003eRich Harris\u003c/a\u003e for \u003ca href=\"https://rollupjs.org/\" target=\"_blank\" rel=\"noopener\"\u003eRollup\u003c/a\u003e and \u003ca href=\"https://buble.surge.sh/guide/\" target=\"_blank\" rel=\"noopener\"\u003eBublé\u003c/a\u003e, which we’re using to compile the super tiny Schnack comment renderer\u003c/li\u003e\u003cli\u003eThanks to \u003ca href=\"https://github.com/developit\" target=\"_blank\" rel=\"noopener\"\u003eJason Miller\u003c/a\u003e for \u003ca href=\"https://github.com/developit/unfetch\" target=\"_blank\" rel=\"noopener\"\u003eunfetch\u003c/a\u003e - the “500 bytes” fetch polyfil we’re using for embed-Schnack communication\u003c/li\u003e\u003cli\u003eThanks to \u003ca href=\"https://twitter.com/jaredhanson\" target=\"_blank\" rel=\"noopener\"\u003eJared Hanson\u003c/a\u003e for making \u003ca href=\"http://passportjs.org/\" target=\"_blank\" rel=\"noopener\"\u003ePassportJS\u003c/a\u003e, which we’re using to deal with Twitter and Facebook authentication\u003c/li\u003e\u003cli\u003eAlso thanks to all the other open source contributors in the Node community. It’s been a lot of fun hacking Schnack.js together, mainly because of you!\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"its-2017-are-people-still-leaving-comments-under-blog-posts\"\u003e\u003ca class=\"anchor\" href=\"#its-2017-are-people-still-leaving-comments-under-blog-posts\"\u003e\u003cspan class=\"header-anchor\"\u003e#\u003c/span\u003e\u003c/a\u003e It’s 2017, are people still leaving comments under blog posts?\u003c/h2\u003e\u003cp\u003eWell, you tell me!\u003c/p\u003e\u003cp\u003eBut reading through some of my older blog posts reminded my that a good blog is never just a one-way broadcast. I couldn’t bring it over myself to dump all the comments, and I definitly don’t want to miss out on future discussions that may arise.\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://github.com/gka/schnack\" class=\"github-fork-ribbon\" style=\"position:fixed;padding:0px 35px;width:128px;top:40px;left:-50px;-webkit-transform:rotate(315deg);-moz-transform:rotate(315deg);-ms-transform:rotate(315deg);transform:rotate(315deg);box-shadow:0 0 0 3px #cc3300, 0 0 20px -3px rgba(0, 0, 0, 0.5);text-shadow:0 0 0 #ffffff, 0 0 5px rgba(0, 0, 0, 0.3);background-color:#cc3300;color:#ffffff;font-size:12px;text-decoration:none;font-weight:bold;border:2px dotted rgba(255,255,255,0.5);-webkit-backface-visibility:hidden;letter-spacing:.5px;background:#c30;box-sizing: content-box; text-align: center;\" target=\"_blank\" rel=\"noopener\"\u003eFork on GitHub\u003c/a\u003e\u003c/p\u003e\u003cstyle type=\"text/css\"\u003e@media (max-width:760px) {.github-fork-ribbon { display: none }}\u003c/style\u003e\u003chr class=\"footnotes-sep\"\u003e\u003csection class=\"footnotes\"\u003e\u003col class=\"footnotes-list\"\u003e\u003cli id=\"fn1\" class=\"footnote-item\"\u003e\u003cp\u003eOther authentication provider like Facebook or Google can be added easily \u003ca href=\"#fnref1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\u003cli id=\"fn2\" class=\"footnote-item\"\u003e\u003cp\u003eWe could've also used an iframe but I kind of didn't want to \u003ca href=\"#fnref2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\u003cli id=\"fn3\" class=\"footnote-item\"\u003e\u003cp\u003eBack when I made my first websites, almost all websites used to be static, hand-written HTML files, and you would write or download some CGI or PHP script to add a \u0026quot;guest book\u0026quot; to your page. This problem is basically how I learned programming. \u003ca href=\"#fnref3\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/section\u003e","contentSnippet":"tl;dr: Schnack.js is an awesome, ad-free, open source Disqus clone that comes with a very minimal, hackable code base.\n# How to embed Schnack.js\nIt works pretty much like other drop-in commenting systems. You drop a script tag under your blog posts, pass a few parameters and Schnack is doing the rest for you.\n\n\n1\n2\n3\n4\n5\n\n\u003cdiv class=\"comments-go-here\"\u003e\u003c/div\u003e\n\u003cscript type=\"text/javascript\"\n   src=\"https://schnack.youdomain.com/embed.js\"\n   data-schnack-target=\".comments-go-here\"\n   data-schnack-slug=\"my-blogpost-slug\"\u003e\u003c/script\u003e\n\n\nThanks to the wonders of modern science the embed.js comes at 2KB gzipped and minified. Your site has full control of the styling of the comments.\n# How Schnack is protecting against spam\nSchnack asks comment authors to sign in via Twitter or Github[1]. New comments need to be approved by the site owner before they show up. To save you some work you can also “trust” comment authors, in which case their comments are being approved automatically.\n# How to install Schnack on your server\nSchnack is a Node app and uses a SQLite database to store the comments. So all you really need to do is to clone the repo, run npm install and start the app.\nTo hook up the authentication you need to go to apps.twitter.com, create a new app and copy the api keys over to your config file.\nSchnack needs to run on a subdomain of the domain your blog is running on, mainly because that’s what cookie authentication is limited to[2].\n# Why did  we decide to work on Schnack?\nOk, here’s a little backstory:\nLast week I replaced my old Wordpress blog with a static Hexo website. Hexo gave me everything I wanted, except for one thing: I missed the comment box below my posts.\nSo I scouted out my options. Disqus was my first consideration, but I was put off by the ads that come with the free “Basic” plan, aside from privacy considerations.\nThen I thought there must be an app for this, but when I didn’t find one that fit my needs (see next section) I decided it’s time to do some hacking[3]!\nThe next step was to put up a readme on Github, just to keep notes of what this app might look like and how it should be organized. My curious friends over at Webkid found the readme while Github-lurking on my repositories and that’s how we got started!\n# Prior art\nOf course, Schnack is not the first of its kind. There are several open source alternatives that I could’ve used but I decided not to.\nThe new flag ship amonst open source commenting systems comes from a well-funded Mozilla-project named Coral Project in collaboration with the Washington Post and New York Times. They have recently launched their comment software Talk which is now in use on washingtonpost.com.\nBut after looking into Talk’s code base I felt it was just way too complex for what I needed.\nThere also a few other open source commenting tools:\n\nDiscourse - looks pretty complex as well, and is written in Ruby on Rails which I refuse to even look at\nCommento - looks clean and simple, but it’s written in Go, which is too fancy for me\nIsso - I only saw this halfway through the coding. Looks actually very similar to Schnack, except it’s written in Python and doesn’t have third-party site authentication (but allows anonymous commenting).\n\nBut I wanted something for Node and haven’t found it so far. Let me know in the comments below if I missed another project!\n# What’s up with that weird name?\nFor non-Germans out there: It’s called Schnack, not snack, and it has nothing to do with receiving sexual favors.\nSchnack is simply a nice northern-German word for chatter that wasn’t already taken by other projects.\n# Can I try Schnack now?\nYes, just leave a comment under this blog post!\n# Standing on the shoulders of giants\nIt wouldn’t be possible to write an app like this in a few days without the amazing libraries it was built upon:\n\nThanks to Rich Harris for Rollup and Bublé, which we’re using to compile the super tiny Schnack comment renderer\nThanks to Jason Miller for unfetch - the “500 bytes” fetch polyfil we’re using for embed-Schnack communication\nThanks to Jared Hanson for making PassportJS, which we’re using to deal with Twitter and Facebook authentication\nAlso thanks to all the other open source contributors in the Node community. It’s been a lot of fun hacking Schnack.js together, mainly because of you!\n\n# It’s 2017, are people still leaving comments under blog posts?\nWell, you tell me!\nBut reading through some of my older blog posts reminded my that a good blog is never just a one-way broadcast. I couldn’t bring it over myself to dump all the comments, and I definitly don’t want to miss out on future discussions that may arise.\nFork on GitHub\n@media (max-width:760px) {.github-fork-ribbon { display: none }}\n\n\nOther authentication provider like Facebook or Google can be added easily ↩︎\n\nWe could've also used an iframe but I kind of didn't want to ↩︎\n\nBack when I made my first websites, almost all websites used to be static, hand-written HTML files, and you would write or download some CGI or PHP script to add a \"guest book\" to your page. This problem is basically how I learned programming. ↩︎","summary":"\u003cp\u003e\u003cstrong\u003etl;dr:\u003c/strong\u003e \u003ca href=\"https://github.com/gka/schnack\" target=\"_blank\" rel=\"noopener\"\u003eSchnack.js\u003c/a\u003e is an awesome, ad-free, op","id":"https://vis4.net/blog/2017/10/hello-schnack/","isoDate":"2017-10-08T20:54:30.000Z","blogTitle":"vis4.net"}},"__N_SSG":true},"page":"/[...slug]","query":{"slug":["say-hello-to-schnackjs-a-new-disqus-like-commenting-drop-in-for-static-websites"]},"buildId":"g_JtxhWbqiyn-x4UYiLa0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>