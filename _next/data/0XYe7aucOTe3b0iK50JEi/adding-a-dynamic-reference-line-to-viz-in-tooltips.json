{"pageProps":{"post":{"creator":"Marc Reid","title":"Adding a Dynamic Reference Line to Viz-in-Tooltips","link":"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/","pubDate":"Tue, 10 May 2022 07:42:39 +0000","content:encoded":"\n<p>For a recent <a rel=\"noreferrer noopener\" href=\"https://tabsoft.co/3s7kquK\" target=\"_blank\">visualisation</a> I used a viz-in-tooltip with a reference line that dynamically updated as the user hovers the pointer across the chart to highlight the date currently being hovered over.</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3062\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/horizon-chart-tooltip-2/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/horizon-chart-tooltip.gif\" data-orig-size=\"1087,443\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"horizon-chart-tooltip\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/horizon-chart-tooltip.gif?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/horizon-chart-tooltip.gif?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/horizon-chart-tooltip.gif?w=1087\" alt=\"\" class=\"wp-image-3062\" /></figure>\n\n\n\n<p>This video tutorial walks through how to customise the viz-in-tooltip to remove the default filtering and add the dynamic reference line. </p>\n\n\n\n<figure class=\"wp-block-embed is-type-rich is-provider-embed-handler wp-block-embed-embed-handler wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"jetpack-video-wrapper\"><iframe class=\"youtube-player\" width=\"736\" height=\"414\" src=\"https://www.youtube.com/embed/RnZ4o1Kld2U?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en-gb&#038;autohide=2&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></div>\n</div></figure>\n\n\n\n<p>Below are the same steps, with a few more details on how the viz-in-tooltip filtering works in Tableau.</p>\n\n\n\n<h3 class=\"wp-block-heading\">Create the main view</h3>\n\n\n\n<p>For this tutorial, I’ll use a simple line chart of monthly sales, using the Tableau Superstore sample dataset that comes with Tableau:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3064\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/00-sales-view/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png\" data-orig-size=\"867,416\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"00-sales-view\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=867\" alt=\"\" class=\"wp-image-3064\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png 867w, https://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/05/00-sales-view.png?w=768 768w\" sizes=\"(max-width: 867px) 100vw, 867px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Create the viz-in-tooltip view</h3>\n\n\n\n<p>We’ll use this simple view showing the total monthly profits as a bar chart with positive and negative values being coloured differently to easily differentiate them.</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3065\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/00-profit-view/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png\" data-orig-size=\"867,416\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"00-profit-view\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=867\" alt=\"\" class=\"wp-image-3065\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png 867w, https://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/05/00-profit-view.png?w=768 768w\" sizes=\"(max-width: 867px) 100vw, 867px\" /></figure>\n\n\n\n<p>To encode the colour, I used this ad-hoc calculation:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>SIGN(SUM(&#091;Profit]]))</code></pre>\n\n\n\n<p>The SIGN() function returns 1 if the number being passed to the function is positive, zero if the number is zero or -1 if the number is negative. A different colour is assigned to each of those results (excluding zero in this case as there were no months where the sum of profit was exactly zero).</p>\n\n\n\n<h3 class=\"wp-block-heading\">Insert the viz-in-tooltip view into the tooltip</h3>\n\n\n\n<p>To add the viz-in-tooltip view to the main chart, edit the tooltips and select:&nbsp;</p>\n\n\n\n<p><strong>Insert &gt; Sheets &gt; Profit</strong></p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3066\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/01-insert-vitt-sheet/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png\" data-orig-size=\"746,544\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"01-insert-vitt-sheet\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png?w=746\" alt=\"\" class=\"wp-image-3066\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png 746w, https://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/01-insert-vitt-sheet.png?w=300 300w\" sizes=\"(max-width: 746px) 100vw, 746px\" /></figure>\n\n\n\n<p>Doing this will insert some code into your tooltip that refers to the sheet being inserted along with sizing and filter information:</p>\n\n\n\n<figure class=\"wp-block-image\"><img src=\"https://lh6.googleusercontent.com/LsI6UpM8d-CFcIEi8NRx4EY17yDAFIXQ36Qs4yNsqYNPyIA01HA4iYNQi51ht_0XSWZ8q6DBkZRNvzj-fTsGtk_-lb5oAnOKAZtmytIgIP_HP5Oi1MkWC8yIOa-VjjdWOMrnPv12\" alt=\"\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Default Viz-in-Tooltip</h3>\n\n\n\n<p>The result of this is that when you hover over a mark (a data point) in the main view, you will see a filtered version of the profit chart in the viz-in-tooltip:</p>\n\n\n\n<figure class=\"wp-block-image\"><img src=\"https://lh6.googleusercontent.com/k_qykVT1lv1dFfnKYr50POrSKA0qHLxDnZj_Tb4uyXKlf7qd6hdzqDIK3Q7wdLBRXDloiHfohrTaAAkuZ1Aa5e7k8gi7xRBS2rSVKGHvxT2e00gMC3ipqwVYfMJsRpFTs39g0GEm\" alt=\"\" /></figure>\n\n\n\n<p>By default, Tableau passes any dimension values in the view through to the viz-in-tooltip chart as a filter, which in this case includes the Order Date at a monthly level of aggregation, so we only see one month of data in the viz-in-tooltip.</p>\n\n\n\n<p>On the profits chart you can see this filter (in italics) that has been automatically generated by Tableau:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3067\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/02-vitt-filter/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png\" data-orig-size=\"264,112\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"02-vitt-filter\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png?w=264\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png?w=264\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png?w=264\" alt=\"\" class=\"wp-image-3067\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png 264w, https://datavisdotblog.files.wordpress.com/2022/05/02-vitt-filter.png?w=150 150w\" sizes=\"(max-width: 264px) 100vw, 264px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Remove viz-in-tooltip filters.</h3>\n\n\n\n<p>To remove this default filtering, we can edit the code that was added to the tooltip when the sheet was inserted and remove the &#8220;&lt;All Fields&gt;&#8221; section at the end. This will ensure no filter values are sent to the viz-in-tooltip chart:</p>\n\n\n\n<p>Before:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>&lt;Sheet name=\"Profit\" maxwidth=\"300\" maxheight=\"300\" filter=\"<strong>&lt;All Fields&gt;</strong>\"&gt;</code></pre>\n\n\n\n<p>After:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>&lt;Sheet name=\"Profit\" maxwidth=\"300\" maxheight=\"300\" filter=\"\"&gt;</code></pre>\n\n\n\n<h3 class=\"wp-block-heading\">Viz-in-tooltip with no filters</h3>\n\n\n\n<p>We now see all months of data in the viz-in-tooltip, which gives more context to the trend of profits, however, it’s not easy to see in the viz-in-tooltip chart which month is being hovered over in the main chart.&nbsp;</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3081\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/04-vitt-no-filter/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png\" data-orig-size=\"783,413\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"04-vitt-no-filter\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=783\" alt=\"\" class=\"wp-image-3081\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png 783w, https://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/05/04-vitt-no-filter.png?w=768 768w\" sizes=\"(max-width: 783px) 100vw, 783px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Add a reference line</h3>\n\n\n\n<p>On the viz-in-tooltip chart, add a reference line on the date axis</p>\n\n\n\n<p>Right click on the axis &gt; Add Reference Line</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3073\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/05-add-ref-line/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png\" data-orig-size=\"382,199\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"05-add-ref-line\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png?w=382\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png?w=382\" alt=\"\" class=\"wp-image-3073\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png 382w, https://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/05-add-ref-line.png?w=300 300w\" sizes=\"(max-width: 382px) 100vw, 382px\" /></figure>\n\n\n\n<p>In the popup that appears, in the Value drop-down, click “<strong>Create a New Parameter…</strong>”</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3072\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/06-add-new-param/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png\" data-orig-size=\"388,545\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"06-add-new-param\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png?w=214\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png?w=388\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png?w=388\" alt=\"\" class=\"wp-image-3072\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png 388w, https://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png?w=107 107w, https://datavisdotblog.files.wordpress.com/2022/05/06-add-new-param.png?w=214 214w\" sizes=\"(max-width: 388px) 100vw, 388px\" /></figure>\n\n\n\n<p>In the parameter dialog that shows, give the parameter a name and set the Display format to be Month Year, from the drop down list (it may show as “March 2001”) as the date is at the monthly granularity in the chart.</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3071\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/07-new-parameter/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png\" data-orig-size=\"406,449\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"07-new-parameter\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png?w=271\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png?w=406\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png?w=406\" alt=\"\" class=\"wp-image-3071\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png 406w, https://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png?w=136 136w, https://datavisdotblog.files.wordpress.com/2022/05/07-new-parameter.png?w=271 271w\" sizes=\"(max-width: 406px) 100vw, 406px\" /></figure>\n\n\n\n<p>Click OK and then format the reference line as below to ensure it is easy to see in the viz-in-tooltip chart.</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3070\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/08-ref-line-format/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png\" data-orig-size=\"613,634\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"08-ref-line-format\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png?w=290\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png?w=613\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png?w=613\" alt=\"\" class=\"wp-image-3070\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png 613w, https://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png?w=145 145w, https://datavisdotblog.files.wordpress.com/2022/05/08-ref-line-format.png?w=290 290w\" sizes=\"(max-width: 613px) 100vw, 613px\" /></figure>\n\n\n\n<p>Ignore the current value, we’ll change that in the next step.</p>\n\n\n\n<h3 class=\"wp-block-heading\">Add a Parameter Action</h3>\n\n\n\n<p>We now need a way to update the reference line when we hover over the Sales chart. On the sales view, go to the Worksheet menu and select Actions:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3069\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/09-actions-menu/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png\" data-orig-size=\"251,188\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"09-actions-menu\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png?w=251\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png?w=251\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png?w=251\" alt=\"\" class=\"wp-image-3069\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png 251w, https://datavisdotblog.files.wordpress.com/2022/05/09-actions-menu.png?w=150 150w\" sizes=\"(max-width: 251px) 100vw, 251px\" /></figure>\n\n\n\n<p>Select <strong>Add Action &gt; Change Parameter</strong></p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3075\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/10-hover-action/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png\" data-orig-size=\"604,425\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"10-hover-action\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png?w=604\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png?w=604\" alt=\"\" class=\"wp-image-3075\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png 604w, https://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/10-hover-action.png?w=300 300w\" sizes=\"(max-width: 604px) 100vw, 604px\" /></figure>\n\n\n\n<p>Then update the following settings:&nbsp;</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3076\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/11-action-settings/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png\" data-orig-size=\"509,490\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"11-action-settings\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png?w=509\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png?w=509\" alt=\"\" class=\"wp-image-3076\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png 509w, https://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/11-action-settings.png?w=300 300w\" sizes=\"(max-width: 509px) 100vw, 509px\" /></figure>\n\n\n\n<p>Now when you hover over a mark in the sales view the viz-in-tooltip will update the reference line in the viz-in-tooltip to match the month you hover over:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3077\" data-permalink=\"http://datavis.blog/2022/05/10/viz-in-tooltips-reference-line/12-final-vitt/\" data-orig-file=\"http://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png\" data-orig-size=\"734,489\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"12-final-vitt\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"http://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png?w=300\" data-large-file=\"http://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png?w=734\" src=\"https://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png?w=734\" alt=\"\" class=\"wp-image-3077\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png 734w, https://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/05/12-final-vitt.png?w=300 300w\" sizes=\"(max-width: 734px) 100vw, 734px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Adjust the size of the viz-in-tooltip</h3>\n\n\n\n<p>If required you can also update the size of the viz-in-tooltip chart by changing the below values in the tooltip, as I did in this case to: 450 px width and 250 px height:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>&lt;Sheet name=\"Profit\" <strong>maxwidth=\"450\" maxheight=\"250\"</strong> filter=\"\"&gt;</code></pre>\n\n\n\n<p>If you want to learn a <em>lot </em>more about tooltips, take a look at <a rel=\"noreferrer noopener\" href=\"https://youtu.be/3SuHBoRzfyQ\" target=\"_blank\">this video</a> tutorial by <a rel=\"noreferrer noopener\" href=\"https://twitter.com/TableauTim\" target=\"_blank\">Tim Ngwena</a>. </p>\n\n\n\n<h3 class=\"wp-block-heading\">Workbook</h3>\n\n\n\n<p>Interact with or download the workbook from my Tableau Public profile <a href=\"https://tabsoft.co/3FubwNm\" target=\"_blank\" rel=\"noreferrer noopener\">here</a>.</p>\n\n\n\n<p>Thanks for reading!</p>\n\n\n\n<p>Marc&nbsp;</p>\n\n\n\n<ul class=\"wp-block-social-links has-icon-color has-icon-background-color is-style-default is-content-justification-left is-layout-flex wp-container-13\"><li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-twitter wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://twitter.com/datavisblog\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M22.23,5.924c-0.736,0.326-1.527,0.547-2.357,0.646c0.847-0.508,1.498-1.312,1.804-2.27 c-0.793,0.47-1.671,0.812-2.606,0.996C18.324,4.498,17.257,4,16.077,4c-2.266,0-4.103,1.837-4.103,4.103 c0,0.322,0.036,0.635,0.106,0.935C8.67,8.867,5.647,7.234,3.623,4.751C3.27,5.357,3.067,6.062,3.067,6.814 c0,1.424,0.724,2.679,1.825,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.034,0,0.052c0,1.988,1.414,3.647,3.292,4.023 c-0.344,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.521-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85 c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843 c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C20.985,7.47,21.68,6.747,22.23,5.924z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">Twitter</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-linkedin wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://www.linkedin.com/in/marcreiduk/\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M19.7,3H4.3C3.582,3,3,3.582,3,4.3v15.4C3,20.418,3.582,21,4.3,21h15.4c0.718,0,1.3-0.582,1.3-1.3V4.3 C21,3.582,20.418,3,19.7,3z M8.339,18.338H5.667v-8.59h2.672V18.338z M7.004,8.574c-0.857,0-1.549-0.694-1.549-1.548 c0-0.855,0.691-1.548,1.549-1.548c0.854,0,1.547,0.694,1.547,1.548C8.551,7.881,7.858,8.574,7.004,8.574z M18.339,18.338h-2.669 v-4.177c0-0.996-0.017-2.278-1.387-2.278c-1.389,0-1.601,1.086-1.601,2.206v4.249h-2.667v-8.59h2.559v1.174h0.037 c0.356-0.675,1.227-1.387,2.526-1.387c2.703,0,3.203,1.779,3.203,4.092V18.338z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">LinkedIn</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-chain wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://public.tableau.com/profile/marc.reid#!/\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M19.647,16.706a1.134,1.134,0,0,0-.343-.833l-2.549-2.549a1.134,1.134,0,0,0-.833-.343,1.168,1.168,0,0,0-.883.392l.233.226q.2.189.264.264a2.922,2.922,0,0,1,.184.233.986.986,0,0,1,.159.312,1.242,1.242,0,0,1,.043.337,1.172,1.172,0,0,1-1.176,1.176,1.237,1.237,0,0,1-.337-.043,1,1,0,0,1-.312-.159,2.76,2.76,0,0,1-.233-.184q-.073-.068-.264-.264l-.226-.233a1.19,1.19,0,0,0-.4.895,1.134,1.134,0,0,0,.343.833L15.837,19.3a1.13,1.13,0,0,0,.833.331,1.18,1.18,0,0,0,.833-.318l1.8-1.789a1.12,1.12,0,0,0,.343-.821Zm-8.615-8.64a1.134,1.134,0,0,0-.343-.833L8.163,4.7a1.134,1.134,0,0,0-.833-.343,1.184,1.184,0,0,0-.833.331L4.7,6.473a1.12,1.12,0,0,0-.343.821,1.134,1.134,0,0,0,.343.833l2.549,2.549a1.13,1.13,0,0,0,.833.331,1.184,1.184,0,0,0,.883-.38L8.728,10.4q-.2-.189-.264-.264A2.922,2.922,0,0,1,8.28,9.9a.986.986,0,0,1-.159-.312,1.242,1.242,0,0,1-.043-.337A1.172,1.172,0,0,1,9.254,8.079a1.237,1.237,0,0,1,.337.043,1,1,0,0,1,.312.159,2.761,2.761,0,0,1,.233.184q.073.068.264.264l.226.233a1.19,1.19,0,0,0,.4-.895ZM22,16.706a3.343,3.343,0,0,1-1.042,2.488l-1.8,1.789a3.536,3.536,0,0,1-4.988-.025l-2.525-2.537a3.384,3.384,0,0,1-1.017-2.488,3.448,3.448,0,0,1,1.078-2.561l-1.078-1.078a3.434,3.434,0,0,1-2.549,1.078,3.4,3.4,0,0,1-2.5-1.029L3.029,9.794A3.4,3.4,0,0,1,2,7.294,3.343,3.343,0,0,1,3.042,4.806l1.8-1.789A3.384,3.384,0,0,1,7.331,2a3.357,3.357,0,0,1,2.5,1.042l2.525,2.537a3.384,3.384,0,0,1,1.017,2.488,3.448,3.448,0,0,1-1.078,2.561l1.078,1.078a3.551,3.551,0,0,1,5.049-.049l2.549,2.549A3.4,3.4,0,0,1,22,16.706Z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">Link</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-youtube wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://www.youtube.com/channel/UC0TRdI_jiy1-YK2a9ZsClcw?sub_confirmation=1\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M21.8,8.001c0,0-0.195-1.378-0.795-1.985c-0.76-0.797-1.613-0.801-2.004-0.847c-2.799-0.202-6.997-0.202-6.997-0.202 h-0.009c0,0-4.198,0-6.997,0.202C4.608,5.216,3.756,5.22,2.995,6.016C2.395,6.623,2.2,8.001,2.2,8.001S2,9.62,2,11.238v1.517 c0,1.618,0.2,3.237,0.2,3.237s0.195,1.378,0.795,1.985c0.761,0.797,1.76,0.771,2.205,0.855c1.6,0.153,6.8,0.201,6.8,0.201 s4.203-0.006,7.001-0.209c0.391-0.047,1.243-0.051,2.004-0.847c0.6-0.607,0.795-1.985,0.795-1.985s0.2-1.618,0.2-3.237v-1.517 C22,9.62,21.8,8.001,21.8,8.001z M9.935,14.594l-0.001-5.62l5.404,2.82L9.935,14.594z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">YouTube</span></a></li></ul>\n\n\n\n<p><strong>Latest YouTube video</strong><br>This video demonstrates combining Cloudinary&#8217;s dynamic image creation service with Tableau&#8217;s new Image Role feature.</p>\n\n\n\n<figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"jetpack-video-wrapper\"><iframe class=\"youtube-player\" width=\"736\" height=\"414\" src=\"https://www.youtube.com/embed/Zwt6eDCA_YM?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en-gb&#038;autohide=2&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></div>\n</div></figure>\n","content:encodedSnippet":"For a recent visualisation I used a viz-in-tooltip with a reference line that dynamically updated as the user hovers the pointer across the chart to highlight the date currently being hovered over.\n\n\n\n\nThis video tutorial walks through how to customise the viz-in-tooltip to remove the default filtering and add the dynamic reference line. \n\n\n\n\n\n\nBelow are the same steps, with a few more details on how the viz-in-tooltip filtering works in Tableau.\nCreate the main view\nFor this tutorial, I’ll use a simple line chart of monthly sales, using the Tableau Superstore sample dataset that comes with Tableau:\n\n\n\n\nCreate the viz-in-tooltip view\nWe’ll use this simple view showing the total monthly profits as a bar chart with positive and negative values being coloured differently to easily differentiate them.\n\n\n\n\nTo encode the colour, I used this ad-hoc calculation:\nSIGN(SUM([Profit]]))\nThe SIGN() function returns 1 if the number being passed to the function is positive, zero if the number is zero or -1 if the number is negative. A different colour is assigned to each of those results (excluding zero in this case as there were no months where the sum of profit was exactly zero).\nInsert the viz-in-tooltip view into the tooltip\nTo add the viz-in-tooltip view to the main chart, edit the tooltips and select: \nInsert > Sheets > Profit\n\n\n\n\nDoing this will insert some code into your tooltip that refers to the sheet being inserted along with sizing and filter information:\n\n\n\n\nDefault Viz-in-Tooltip\nThe result of this is that when you hover over a mark (a data point) in the main view, you will see a filtered version of the profit chart in the viz-in-tooltip:\n\n\n\n\nBy default, Tableau passes any dimension values in the view through to the viz-in-tooltip chart as a filter, which in this case includes the Order Date at a monthly level of aggregation, so we only see one month of data in the viz-in-tooltip.\nOn the profits chart you can see this filter (in italics) that has been automatically generated by Tableau:\n\n\n\n\nRemove viz-in-tooltip filters.\nTo remove this default filtering, we can edit the code that was added to the tooltip when the sheet was inserted and remove the “<All Fields>” section at the end. This will ensure no filter values are sent to the viz-in-tooltip chart:\nBefore:\n<Sheet name=\"Profit\" maxwidth=\"300\" maxheight=\"300\" filter=\"<All Fields>\">\nAfter:\n<Sheet name=\"Profit\" maxwidth=\"300\" maxheight=\"300\" filter=\"\">\nViz-in-tooltip with no filters\nWe now see all months of data in the viz-in-tooltip, which gives more context to the trend of profits, however, it’s not easy to see in the viz-in-tooltip chart which month is being hovered over in the main chart. \n\n\n\n\nAdd a reference line\nOn the viz-in-tooltip chart, add a reference line on the date axis\nRight click on the axis > Add Reference Line\n\n\n\n\nIn the popup that appears, in the Value drop-down, click “Create a New Parameter…”\n\n\n\n\nIn the parameter dialog that shows, give the parameter a name and set the Display format to be Month Year, from the drop down list (it may show as “March 2001”) as the date is at the monthly granularity in the chart.\n\n\n\n\nClick OK and then format the reference line as below to ensure it is easy to see in the viz-in-tooltip chart.\n\n\n\n\nIgnore the current value, we’ll change that in the next step.\nAdd a Parameter Action\nWe now need a way to update the reference line when we hover over the Sales chart. On the sales view, go to the Worksheet menu and select Actions:\n\n\n\n\nSelect Add Action > Change Parameter\n\n\n\n\nThen update the following settings: \n\n\n\n\nNow when you hover over a mark in the sales view the viz-in-tooltip will update the reference line in the viz-in-tooltip to match the month you hover over:\n\n\n\n\nAdjust the size of the viz-in-tooltip\nIf required you can also update the size of the viz-in-tooltip chart by changing the below values in the tooltip, as I did in this case to: 450 px width and 250 px height:\n<Sheet name=\"Profit\" maxwidth=\"450\" maxheight=\"250\" filter=\"\">\nIf you want to learn a lot more about tooltips, take a look at this video tutorial by Tim Ngwena. \nWorkbook\nInteract with or download the workbook from my Tableau Public profile here.\nThanks for reading!\nMarc \n\nTwitter\n\nLinkedIn\n\nLink\n\nYouTube\n\n\n\n\nLatest YouTube video\nThis video demonstrates combining Cloudinary’s dynamic image creation service with Tableau’s new Image Role feature.","dc:creator":"Marc Reid","content":"This post shows you how to change the default behaviour of viz-in-tooltips, removing the filter and adding a dynamic reference line using a parameter action.","contentSnippet":"This post shows you how to change the default behaviour of viz-in-tooltips, removing the filter and adding a dynamic reference line using a parameter action.","guid":"https://datavis.blog/?p=3060","categories":["Tips","Viz-in-tooltip","reference line","Tableau"],"isoDate":"2022-05-10T07:42:39.000Z","blogTitle":"Datavis.blog","img":"http://datavisdotblog.files.wordpress.com/2022/02/datavis.blog-heatmap.png?w=32"}},"__N_SSG":true}