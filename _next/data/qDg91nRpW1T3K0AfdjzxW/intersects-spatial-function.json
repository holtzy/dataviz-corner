{"pageProps":{"post":{"creator":"Marc Reid","title":"Intersects Spatial Function","link":"https://datavis.blog/2022/12/28/intersects-spatial-function/","pubDate":"Wed, 28 Dec 2022 20:38:12 +0000","content:encoded":"\n<p>This new spatial function, introduced in 2022.4, makes it possible to determine if two spatial objects overlap without needing to perform a spatial join. It works with the following combinations of spatial objects:</p>\n\n\n\n<ul>\n<li>Point and polygon</li>\n\n\n\n<li>Line and polygon</li>\n\n\n\n<li>Polygon and polygon</li>\n</ul>\n\n\n\n<p>The function takes two mandatory spatial object arguments in the following format:</p>\n\n\n\n<pre class=\"wp-block-code\"><code>INTERSECTS( &#091;geometry_1], &#091;geometry_2] )</code></pre>\n\n\n\n<p>And returns either True or False.</p>\n\n\n\n<h3 class=\"wp-block-heading\">Points and Polygons Example</h3>\n\n\n\n<p>In this example, I connected to a dataset with Airbnb locations (<strong>Airbnb Points</strong>) in a specific area of London. Then I created a buffer spatial object around an (imaginary) point of interest (<strong>POI 1</strong>) within that same area.&nbsp;</p>\n\n\n\n<p>I then used the following calculation to determine which Airbnb points intersect with the buffer</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3370\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/00-tableau-intersects-function/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png\" data-orig-size=\"545,102\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"00-tableau-intersects-function\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png?w=545\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png?w=545\" alt=\"\" class=\"wp-image-3370\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png 545w, https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/00-tableau-intersects-function.png?w=300 300w\" sizes=\"(max-width: 545px) 100vw, 545px\" /></figure>\n\n\n\n<p><br>This returns True or False and, when added the Colour shelf, can be used to colour encode the Airbnb locations:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3368\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/01-tableau-intersects-point-and-polygon/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png\" data-orig-size=\"842,733\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"01-tableau-intersects-point-and-polygon\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=842\" alt=\"\" class=\"wp-image-3368\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png 842w, https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/12/01-tableau-intersects-point-and-polygon.png?w=768 768w\" sizes=\"(max-width: 842px) 100vw, 842px\" /></figure>\n\n\n\n<p><br>The buffer size is controlled with a parameter. When this is increased, we can see that the number of Airbnb locations colour encoded as intersecting the buffer object increases:&nbsp;</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3369\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/02-tableau-intersects-point-and-polygon/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png\" data-orig-size=\"843,732\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"02-tableau-intersects-point-and-polygon\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=843\" alt=\"\" class=\"wp-image-3369\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png 843w, https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/12/02-tableau-intersects-point-and-polygon.png?w=768 768w\" sizes=\"(max-width: 843px) 100vw, 843px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Count the number of Airbnbs that intersect the buffer</h3>\n\n\n\n<p>The following calculation returns a count of the number of Airbnb IDs of those that intersect with the buffer object.</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3371\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/05-number-of-points-that-intersect-calculation/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png\" data-orig-size=\"630,104\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"05-number-of-points-that-intersect-calculation\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png?w=630\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png?w=630\" alt=\"\" class=\"wp-image-3371\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png 630w, https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/05-number-of-points-that-intersect-calculation.png?w=300 300w\" sizes=\"(max-width: 630px) 100vw, 630px\" /></figure>\n\n\n\n<p><br>We can also return the above number as a percentage of the total number of Airbnbs:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3372\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/06-percentage-of-points-that-intersect-calculation/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png\" data-orig-size=\"484,101\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"06-percentage-of-points-that-intersect-calculation\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png?w=484\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png?w=484\" alt=\"\" class=\"wp-image-3372\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png 484w, https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/06-percentage-of-points-that-intersect-calculation.png?w=300 300w\" sizes=\"(max-width: 484px) 100vw, 484px\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Add Labels to the View</h3>\n\n\n\n<p>Adding these two calculations to the Label shelf, we can see them dynamically update as the buffer size is changed:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3373\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/07-labels/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png\" data-orig-size=\"227,246\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"07-labels\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png?w=227\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png?w=227\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png?w=227\" alt=\"\" class=\"wp-image-3373\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png 227w, https://datavisdotblog.files.wordpress.com/2022/12/07-labels.png?w=138 138w\" sizes=\"(max-width: 227px) 100vw, 227px\" /></figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3380\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/tableau-intersects-function-gif/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/tableau-intersects-function-gif.gif\" data-orig-size=\"736,593\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"tableau-intersects-function-gif\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/tableau-intersects-function-gif.gif?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/tableau-intersects-function-gif.gif?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/tableau-intersects-function-gif.gif?w=736\" alt=\"\" class=\"wp-image-3380\" /></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Lines and Polygon Example</h3>\n\n\n\n<p>The below example uses a spatial file with rivers and waterways, which are all line spatial objects. Again, a buffer object has been added and those <strong>waterways that intersect with the buffer have been colour encoded</strong> using an intersects calculation.</p>\n\n\n\n<p>As the intersects function is being applied to a line and a polygon, <strong>only part of the line needs to intersect</strong> with the buffer (polygon) for the whole line to be encoded, which is why some parts of the waterways are encoded red (intersecting) even though they are outside of the buffer</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3374\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/08-intersects-waterways-line-polygon/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png\" data-orig-size=\"916,657\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"08-intersects-waterways-line-polygon\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=916\" alt=\"\" class=\"wp-image-3374\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png 916w, https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=300 300w, https://datavisdotblog.files.wordpress.com/2022/12/08-intersects-waterways-line-polygon.png?w=768 768w\" sizes=\"(max-width: 916px) 100vw, 916px\" /></figure>\n\n\n\n<p><br>Below is the calculation used to colour encode the waterways above:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3375\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/09-intersects-line-polygon-calculation/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png\" data-orig-size=\"426,96\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"09-intersects-line-polygon-calculation\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png?w=426\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png?w=426\" alt=\"\" class=\"wp-image-3375\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png 426w, https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/09-intersects-line-polygon-calculation.png?w=300 300w\" sizes=\"(max-width: 426px) 100vw, 426px\" /></figure>\n\n\n\n<p><br>Again, changing the buffer size will alter which lines (waterways) the buffer intersects:</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3379\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/intersects-line-buffer-gif/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/intersects-line-buffer-gif.gif\" data-orig-size=\"736,562\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"intersects-line-buffer-gif\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/intersects-line-buffer-gif.gif?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/intersects-line-buffer-gif.gif?w=736\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/intersects-line-buffer-gif.gif?w=736\" alt=\"\" class=\"wp-image-3379\" /></figure>\n\n\n\n<p>Data: <a href=\"https://www.ordnancesurvey.co.uk/business-government/products/open-map-rivers\" target=\"_blank\" rel=\"noreferrer noopener\">OS Open Rivers</a> <br><em>Contains OS data © Crown copyright and database right 2021</em></p>\n\n\n\n<h3 class=\"wp-block-heading\">Previous methods using the Distance function</h3>\n\n\n\n<p>For the point and buffer (polygon) example, it was previously possible to achieve this same encoding effect using the DISTANCE function to check if distance from the centre of the buffer to the point was less than or equal to the buffer size:&nbsp;</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3377\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/10-distance-function/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png\" data-orig-size=\"531,139\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"10-distance-function\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png?w=531\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png?w=531\" alt=\"\" class=\"wp-image-3377\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png 531w, https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/10-distance-function.png?w=300 300w\" sizes=\"(max-width: 531px) 100vw, 531px\" /></figure>\n\n\n\n<p><br>When using other combinations of spatial objects, including regular (non-buffer) polygons, however, this approach won’t work and would require a spatial join, so this new Intersects function provides more flexibility.&nbsp;</p>\n\n\n\n<h3 class=\"wp-block-heading\">Alternative for Spatial Joins</h3>\n\n\n\n<p>When performing an <strong>inner Intersects spatial join</strong>, only rows that meet the join condition will be available for analysis.&nbsp;</p>\n\n\n\n<figure class=\"wp-block-image size-large\"><img data-attachment-id=\"3378\" data-permalink=\"https://datavis.blog/2022/12/28/intersects-spatial-function/11-spatial-join/\" data-orig-file=\"https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png\" data-orig-size=\"614,265\" data-comments-opened=\"0\" data-image-meta=\"{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}\" data-image-title=\"11-spatial-join\" data-image-description=\"\" data-image-caption=\"\" data-medium-file=\"https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png?w=300\" data-large-file=\"https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png?w=614\" src=\"https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png?w=614\" alt=\"\" class=\"wp-image-3378\" srcset=\"https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png 614w, https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png?w=150 150w, https://datavisdotblog.files.wordpress.com/2022/12/11-spatial-join.png?w=300 300w\" sizes=\"(max-width: 614px) 100vw, 614px\" /></figure>\n\n\n\n<p><br>An alternative is to join (or create a relation) on <strong>join calculation fields such as 1=1</strong>, which will not filter any data and allow you to then use the Intersects function during your analysis to create the same effect &#8211; i.e. by <strong>then filtering out records where the result of the Intersects function is True.</strong> This provides more flexibility and lets you <strong>effectively turn the spatial join on or off dynamically within your analysis</strong>. </p>\n\n\n\n<p>Note that if you use the 1=1 join technique, you will <strong>create duplicate rows</strong> (assuming both data sources have more than one row), so you need to account for that in your analysis.<br><br>You can also use the Intersects function to encode data (as we’ve seen in earlier examples above) instead of filtering, again providing more options and flexibility in your analysis.&nbsp;</p>\n\n\n\n<p>See <a href=\"https://datavis.blog/2022/01/06/spatial-joins-in-tableau/\">this blog post</a> to learn more about spatial joins in Tableau.</p>\n\n\n\n<h3 class=\"wp-block-heading\">Video Tutorial</h3>\n\n\n\n<p>This video walks through a couple of scenarios for using the new Intersects spatial function in Tableau</p>\n\n\n\n<figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"jetpack-video-wrapper\"><iframe class=\"youtube-player\" width=\"736\" height=\"414\" src=\"https://www.youtube.com/embed/aqunvBEpnJY?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en-gb&#038;autohide=2&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></div>\n</div></figure>\n\n\n\n<h3 class=\"wp-block-heading\">Conclusion</h3>\n\n\n\n<p>In summary, the Intersects spatial function is a great addition to the <a href=\"https://help.tableau.com/current/pro/desktop/en-us/functions_functions_spatial.htm\">spatial functions</a> currently available in Tableau, providing more flexibility as you analyse your data.&nbsp;</p>\n\n\n\n<p>Thanks for reading.</p>\n\n\n\n<p>Marc</p>\n\n\n\n<ul class=\"wp-block-social-links has-icon-color has-icon-background-color is-style-default is-content-justification-left is-layout-flex wp-container-4\"><li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-twitter wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://twitter.com/datavisblog\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M22.23,5.924c-0.736,0.326-1.527,0.547-2.357,0.646c0.847-0.508,1.498-1.312,1.804-2.27 c-0.793,0.47-1.671,0.812-2.606,0.996C18.324,4.498,17.257,4,16.077,4c-2.266,0-4.103,1.837-4.103,4.103 c0,0.322,0.036,0.635,0.106,0.935C8.67,8.867,5.647,7.234,3.623,4.751C3.27,5.357,3.067,6.062,3.067,6.814 c0,1.424,0.724,2.679,1.825,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.034,0,0.052c0,1.988,1.414,3.647,3.292,4.023 c-0.344,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.521-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85 c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843 c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C20.985,7.47,21.68,6.747,22.23,5.924z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">Twitter</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-linkedin wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://www.linkedin.com/in/marcreiduk/\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M19.7,3H4.3C3.582,3,3,3.582,3,4.3v15.4C3,20.418,3.582,21,4.3,21h15.4c0.718,0,1.3-0.582,1.3-1.3V4.3 C21,3.582,20.418,3,19.7,3z M8.339,18.338H5.667v-8.59h2.672V18.338z M7.004,8.574c-0.857,0-1.549-0.694-1.549-1.548 c0-0.855,0.691-1.548,1.549-1.548c0.854,0,1.547,0.694,1.547,1.548C8.551,7.881,7.858,8.574,7.004,8.574z M18.339,18.338h-2.669 v-4.177c0-0.996-0.017-2.278-1.387-2.278c-1.389,0-1.601,1.086-1.601,2.206v4.249h-2.667v-8.59h2.559v1.174h0.037 c0.356-0.675,1.227-1.387,2.526-1.387c2.703,0,3.203,1.779,3.203,4.092V18.338z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">LinkedIn</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-chain wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://public.tableau.com/profile/marc.reid#!/\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M19.647,16.706a1.134,1.134,0,0,0-.343-.833l-2.549-2.549a1.134,1.134,0,0,0-.833-.343,1.168,1.168,0,0,0-.883.392l.233.226q.2.189.264.264a2.922,2.922,0,0,1,.184.233.986.986,0,0,1,.159.312,1.242,1.242,0,0,1,.043.337,1.172,1.172,0,0,1-1.176,1.176,1.237,1.237,0,0,1-.337-.043,1,1,0,0,1-.312-.159,2.76,2.76,0,0,1-.233-.184q-.073-.068-.264-.264l-.226-.233a1.19,1.19,0,0,0-.4.895,1.134,1.134,0,0,0,.343.833L15.837,19.3a1.13,1.13,0,0,0,.833.331,1.18,1.18,0,0,0,.833-.318l1.8-1.789a1.12,1.12,0,0,0,.343-.821Zm-8.615-8.64a1.134,1.134,0,0,0-.343-.833L8.163,4.7a1.134,1.134,0,0,0-.833-.343,1.184,1.184,0,0,0-.833.331L4.7,6.473a1.12,1.12,0,0,0-.343.821,1.134,1.134,0,0,0,.343.833l2.549,2.549a1.13,1.13,0,0,0,.833.331,1.184,1.184,0,0,0,.883-.38L8.728,10.4q-.2-.189-.264-.264A2.922,2.922,0,0,1,8.28,9.9a.986.986,0,0,1-.159-.312,1.242,1.242,0,0,1-.043-.337A1.172,1.172,0,0,1,9.254,8.079a1.237,1.237,0,0,1,.337.043,1,1,0,0,1,.312.159,2.761,2.761,0,0,1,.233.184q.073.068.264.264l.226.233a1.19,1.19,0,0,0,.4-.895ZM22,16.706a3.343,3.343,0,0,1-1.042,2.488l-1.8,1.789a3.536,3.536,0,0,1-4.988-.025l-2.525-2.537a3.384,3.384,0,0,1-1.017-2.488,3.448,3.448,0,0,1,1.078-2.561l-1.078-1.078a3.434,3.434,0,0,1-2.549,1.078,3.4,3.4,0,0,1-2.5-1.029L3.029,9.794A3.4,3.4,0,0,1,2,7.294,3.343,3.343,0,0,1,3.042,4.806l1.8-1.789A3.384,3.384,0,0,1,7.331,2a3.357,3.357,0,0,1,2.5,1.042l2.525,2.537a3.384,3.384,0,0,1,1.017,2.488,3.448,3.448,0,0,1-1.078,2.561l1.078,1.078a3.551,3.551,0,0,1,5.049-.049l2.549,2.549A3.4,3.4,0,0,1,22,16.706Z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">Link</span></a></li>\n\n<li style=\"color: #ffffff; background-color: #000000; \" class=\"wp-social-link wp-social-link-youtube wp-block-social-link\"><a rel=\" noopener nofollow\" target=\"_blank\" href=\"https://www.youtube.com/channel/UC0TRdI_jiy1-YK2a9ZsClcw?sub_confirmation=1\" class=\"wp-block-social-link-anchor\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M21.8,8.001c0,0-0.195-1.378-0.795-1.985c-0.76-0.797-1.613-0.801-2.004-0.847c-2.799-0.202-6.997-0.202-6.997-0.202 h-0.009c0,0-4.198,0-6.997,0.202C4.608,5.216,3.756,5.22,2.995,6.016C2.395,6.623,2.2,8.001,2.2,8.001S2,9.62,2,11.238v1.517 c0,1.618,0.2,3.237,0.2,3.237s0.195,1.378,0.795,1.985c0.761,0.797,1.76,0.771,2.205,0.855c1.6,0.153,6.8,0.201,6.8,0.201 s4.203-0.006,7.001-0.209c0.391-0.047,1.243-0.051,2.004-0.847c0.6-0.607,0.795-1.985,0.795-1.985s0.2-1.618,0.2-3.237v-1.517 C22,9.62,21.8,8.001,21.8,8.001z M9.935,14.594l-0.001-5.62l5.404,2.82L9.935,14.594z\"></path></svg><span class=\"wp-block-social-link-label screen-reader-text\">YouTube</span></a></li></ul>\n\n\n\n<p><strong>Latest YouTube video</strong><br>Tutorial walking through two examples of the new <strong>INTERSECTS()</strong> spatial function in Tableau 2022.4</p>\n\n\n\n<figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"jetpack-video-wrapper\"><iframe class=\"youtube-player\" width=\"736\" height=\"414\" src=\"https://www.youtube.com/embed/aqunvBEpnJY?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en-gb&#038;autohide=2&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></div>\n</div></figure>\n","content:encodedSnippet":"This new spatial function, introduced in 2022.4, makes it possible to determine if two spatial objects overlap without needing to perform a spatial join. It works with the following combinations of spatial objects:\nPoint and polygon\nLine and polygon\nPolygon and polygon\nThe function takes two mandatory spatial object arguments in the following format:\nINTERSECTS( [geometry_1], [geometry_2] )\nAnd returns either True or False.\nPoints and Polygons Example\nIn this example, I connected to a dataset with Airbnb locations (Airbnb Points) in a specific area of London. Then I created a buffer spatial object around an (imaginary) point of interest (POI 1) within that same area. \nI then used the following calculation to determine which Airbnb points intersect with the buffer\n\n\n\n\n\nThis returns True or False and, when added the Colour shelf, can be used to colour encode the Airbnb locations:\n\n\n\n\n\nThe buffer size is controlled with a parameter. When this is increased, we can see that the number of Airbnb locations colour encoded as intersecting the buffer object increases: \n\n\n\n\nCount the number of Airbnbs that intersect the buffer\nThe following calculation returns a count of the number of Airbnb IDs of those that intersect with the buffer object.\n\n\n\n\n\nWe can also return the above number as a percentage of the total number of Airbnbs:\n\n\n\n\nAdd Labels to the View\nAdding these two calculations to the Label shelf, we can see them dynamically update as the buffer size is changed:\n\n\n\n\n\n\n\n\nLines and Polygon Example\nThe below example uses a spatial file with rivers and waterways, which are all line spatial objects. Again, a buffer object has been added and those waterways that intersect with the buffer have been colour encoded using an intersects calculation.\nAs the intersects function is being applied to a line and a polygon, only part of the line needs to intersect with the buffer (polygon) for the whole line to be encoded, which is why some parts of the waterways are encoded red (intersecting) even though they are outside of the buffer\n\n\n\n\n\nBelow is the calculation used to colour encode the waterways above:\n\n\n\n\n\nAgain, changing the buffer size will alter which lines (waterways) the buffer intersects:\n\n\n\n\nData: OS Open Rivers \nContains OS data © Crown copyright and database right 2021\nPrevious methods using the Distance function\nFor the point and buffer (polygon) example, it was previously possible to achieve this same encoding effect using the DISTANCE function to check if distance from the centre of the buffer to the point was less than or equal to the buffer size: \n\n\n\n\n\nWhen using other combinations of spatial objects, including regular (non-buffer) polygons, however, this approach won’t work and would require a spatial join, so this new Intersects function provides more flexibility. \nAlternative for Spatial Joins\nWhen performing an inner Intersects spatial join, only rows that meet the join condition will be available for analysis. \n\n\n\n\n\nAn alternative is to join (or create a relation) on join calculation fields such as 1=1, which will not filter any data and allow you to then use the Intersects function during your analysis to create the same effect – i.e. by then filtering out records where the result of the Intersects function is True. This provides more flexibility and lets you effectively turn the spatial join on or off dynamically within your analysis. \nNote that if you use the 1=1 join technique, you will create duplicate rows (assuming both data sources have more than one row), so you need to account for that in your analysis.\nYou can also use the Intersects function to encode data (as we’ve seen in earlier examples above) instead of filtering, again providing more options and flexibility in your analysis. \nSee this blog post to learn more about spatial joins in Tableau.\nVideo Tutorial\nThis video walks through a couple of scenarios for using the new Intersects spatial function in Tableau\n\n\n\n\n\n\nConclusion\nIn summary, the Intersects spatial function is a great addition to the spatial functions currently available in Tableau, providing more flexibility as you analyse your data. \nThanks for reading.\nMarc\n\nTwitter\n\nLinkedIn\n\nLink\n\nYouTube\n\n\n\n\nLatest YouTube video\nTutorial walking through two examples of the new INTERSECTS() spatial function in Tableau 2022.4","dc:creator":"Marc Reid","content":"The new INTERSECTS() spatial function, introduced in 2022.4, makes it possible to determine if two spatial objects overlap without needing to perform a spatial join. This post walks through a few examples with points, polygons (buffers) and lines.","contentSnippet":"The new INTERSECTS() spatial function, introduced in 2022.4, makes it possible to determine if two spatial objects overlap without needing to perform a spatial join. This post walks through a few examples with points, polygons (buffers) and lines.","guid":"http://datavis.blog/?p=3366","categories":["Spatial","Intersects","Tableau"],"isoDate":"2022-12-28T20:38:12.000Z","blogTitle":"Datavis.blog","img":"https://datavisdotblog.files.wordpress.com/2022/02/datavis.blog-heatmap.png?w=32"}},"__N_SSG":true}